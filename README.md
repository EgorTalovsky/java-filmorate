# java-filmorate
Template repository for Filmorate project.

![ER-diagram](https://github.com/EgorTalovsky/java-filmorate/blob/main/QuickDBD-Filmorate%20ER%20v%201.0.png)

  Пока диаграмма небольшая, основные поля понятны. Есть две главные сущности - фильм и юзер.
В нынешней реализации они связываеются только в одном случае - когда юзер ставит лайк фильму. В диаграмме есть таблица "film_like", где id фильма соответствует поле id юзера, который поставил лайк. При вызове метода получения самых популярных фильмов это будет легко сделать, сначала посчитав в этой таблице количество лайков у каждого фильма (предварительно сгруппировать фильмы по id), и вызывать название через основную талицу "film"
  Поскольку полный список друзей в ячейке содержаться не может, есть промежуточная таблица "friends_users", где id одного юзера соответсвует id его друга, таким образом можно будет легко получить список друзей определенного юзера, отфильтровав таблицу по его id. Список общих друзей можно будет получить через оператор INNER JOIN. 
  Таблица "friend_request" отражает еще не подтвержденные отправленные заявки в друзья. Первичным ключом является поле "receiving_user_id", которое содержит id юзера, получившего заявку в друзья. Поле "submitting_user_id" содержит id того, кто эту заявку отправил. Таким образом можно легко получать список отправленных или полученных заявок определенного юзера. Как только юзер на заявку отвечает (добавляет в друзья или нет), запись в данной таблице удаляется и добавляется соответсвующая запись в таблицу "friends_users"
